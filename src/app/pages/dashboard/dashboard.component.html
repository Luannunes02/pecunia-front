<div class="dashboard-container p-6">
  <h1 class="text-2xl font-semibold text-gray-800 mb-6">Dashboard</h1>

  <div *ngIf="loading" class="flex justify-center items-center h-64">
    <mat-spinner></mat-spinner>
  </div>

  <div *ngIf="!loading && dashboardData" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    <!-- Saldo Total -->
    <div class="bg-white rounded-lg shadow p-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-medium text-gray-700">Saldo Total</h2>
        <mat-icon class="text-pecunia-dark-green text-2xl">account_balance</mat-icon>
      </div>
      <p class="text-3xl font-bold"
         [ngClass]="{
           'text-green-600': dashboardData.balance > 0,
           'text-red-600': dashboardData.balance < 0,
           'text-gray-600': dashboardData.balance === 0
         }">
        {{ formatCurrency(dashboardData.balance) }}
      </p>
    </div>

    <!-- Receitas do Mês -->
    <div class="bg-white rounded-lg shadow p-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-medium text-gray-700">Receitas do Mês</h2>
        <mat-icon class="text-green-600 text-2xl">arrow_upward</mat-icon>
      </div>
      <p class="text-3xl font-bold text-green-600">
        {{ formatCurrency(dashboardData.totalIncome) }}
      </p>
    </div>

    <!-- Despesas do Mês -->
    <div class="bg-white rounded-lg shadow p-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-medium text-gray-700">Despesas do Mês</h2>
        <mat-icon class="text-red-600 text-2xl">arrow_downward</mat-icon>
      </div>
      <p class="text-3xl font-bold text-red-600">
        {{ formatCurrency(dashboardData.totalExpense) }}
      </p>
    </div>

    <!-- Saldo do Mês -->
    <div class="bg-white rounded-lg shadow p-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-medium text-gray-700">Saldo do Mês</h2>
        <mat-icon class="text-pecunia-dark-green text-2xl">account_balance_wallet</mat-icon>
      </div>
      <p class="text-3xl font-bold"
         [ngClass]="{
           'text-green-600': getMonthlyBalance() > 0,
           'text-red-600': getMonthlyBalance() < 0,
           'text-gray-600': getMonthlyBalance() === 0
         }">
        {{ formatCurrency(getMonthlyBalance()) }}
      </p>
    </div>
  </div>

  <!-- Gráficos -->
  <div *ngIf="!loading && dashboardData" class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
    <!-- Gráfico de Receitas/Despesas Mensais -->
    <div class="bg-white rounded-lg shadow p-6">
      <h2 class="text-lg font-medium text-gray-700 mb-4">Resumo Mensal</h2>
      <app-graphic
      style="max-height: 40vh;"
        [chartId]="'monthly-summary'"
        type="bar"
        [labels]="getMonthlySummaryLabels()"
        [datasets]="getMonthlySummaryDatasets()"
      ></app-graphic>
    </div>

    <!-- Gráfico de Saldos por Conta -->
    <div class="bg-white rounded-lg shadow p-6">
      <h2 class="text-lg font-medium text-gray-700 mb-4">Saldo por Conta</h2>
      <app-graphic
        style="max-height: 40vh;"
        [chartId]="'account-balances'"
        type="pie"
        [labels]="getAccountBalanceLabels()"
        [datasets]="getAccountBalanceDatasets()"
      ></app-graphic>
    </div>
  </div>
</div>
